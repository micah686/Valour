@inherits Modal<EditChannelListItemComponent.ModalParams>

<MainMenuComponent
    DefaultCategory="@Data.StartCategory"
    DefaultItem="@Data.StartItem"
    MenuCategories="@_categories" />

@code {

    public class ModalParams
    {
        public Channel Channel;
        public string StartCategory;
        public string StartItem;
    }

    private List<MainMenu.MenuCategory> _categories;

    private RenderFragment InfoContent => @<EditCLIDetailsComponent Channel="@Data.Channel" />;
    private RenderFragment PermissionsContent => @<EditCLIPermissionsComponent Target="@Data.Channel" />;

    protected override void OnInitialized()
    {
        _categories = BuildCategories();
    }

    private List<MainMenu.MenuCategory> BuildCategories() =>
        new List<MainMenu.MenuCategory>()
        {
            new MainMenu.MenuCategory()
            {
                Name = "General Settings",
                Icon = "gear-fill",
                Items = new List<MainMenu.MenuItem>()
                {
                    new MainMenu.MenuItem()
                    {
                        Name = "Info",
                        Icon = "info-circle-fill",
                        Description = "Edit channel information",
                        Content = InfoContent
                    },
                    new MainMenu.MenuItem()
                    {
                        Name = "Permissions",
                        Icon = "person-fill",
                        Description = "Manage channel permissions",
                        Content = PermissionsContent
                    }
                }
            }
        };
}
